<!DOCTYPE html>
<html ng-app>
<head>
    <meta charset="utf-8">
    <title>后台管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="guodandan">
    <!--必备的Css-->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <link href="assets/css/theme.css" rel="stylesheet">
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/alertify.css" rel="stylesheet">
    <link href="assets/css/opp-app.css" rel="stylesheet">

    <link href="assets/css/jquery.dataTables.css" rel="stylesheet">

    <script type="text/javascript" src="js/common/jquery-1.11.3.min.js"></script>

    <script type="text/javascript">

        window.onload=function(){

            var localUrl=decodeURI(window.location.href);
            var queryPageParam=localUrl.substr(localUrl.lastIndexOf("?")+1);

            if(!queryPageParam.match("^page=[0-9]*&rows=[0-9]*$")){

                queryPages("page=1&rows=10000");
                return;
            }
            queryPages(queryPageParam);
        }

        function queryPages(param){

            $.ajax({
                url:"http://admin.boluo.com/admin/queryPageVolunteer?"+param,
                dataType:"json",
                type:"POST",
                success:function(data){
                    console.log(data);
                    if(data.rows.length>0){

                        $.each(data.rows,function(index, temp){

                            $("#outlook").append("<tr>"+
                                "<td>"+temp.userId+"</td>"+
                                "<td>"+temp.volunteerName+"</td>"+
                                "<td>"+temp.volunteerGender+"</td>"+
                                "<td>"+temp.volunteerAge+"</td>"+
                                "<td style='color: green'>"+temp.volunteerHealth+"</td>"+
                                "<td>"+temp.volunteerPhone+"</td>"+
                                "<td>"+temp.volunteerAddress+"</td>"+
                                "</tr>");
                        });
                    }

                },
                error : function(){
                    alert("请求失败");
                }
            });
        }

        function onclick12() {

            var userId = $("input[name=input1]").val();
            console.log(userId);

            $.ajax({
                url:"http://admin.boluo.com/admin/passVolunteer",
                dataType:"json",
                type:"POST",
                data:{
                    "userId":userId
                },
                success:function(){
                    alert("批准成功!");
                    location.reload();
                },
                error : function(){
                    alert("请求失败");
                }
            });

        }

        function onclick13() {

            var userId = $("input[name=input1]").val();
            console.log(userId);

            $.ajax({
                url:"http://admin.boluo.com/admin/refuse",
                dataType:"json",
                type:"POST",
                data:{
                    "userId":userId
                },
                success:function(){
                    alert("拒绝成功!");
                    location.reload();
                },
                error : function(){
                    alert("请求失败");
                }
            });

        }

    </script>

</head>
<body>
<div id="wrap">
    <!-- navbar-->
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">
                <div ng-include src="'navbar.html'"></div>
            </div>
        </div>
    </div>
    <!--/ navbar-->
    <div class="container-fluid">
        <!-- Side menu -->
        <div class="sidebar-nav nav-collapse collapse">
            <div class="user_side clearfix">
                <img src="assets/img/odinn.jpg" alt="Odinn god of Thunder">
                <h5 id="currentuser"></h5>
                <a href="setting.html"><i class="icon-cog"></i> 个人中心</a>
            </div>
            <!--<div ng-include src="'menu.html'"></div>-->
            <!--开始-->
            <div class="accordion" id="accordion2">
                <div class="accordion-group">
                    <div class="accordion-heading">
                        <a class="accordion-toggle b_F79999" href="index_admin.html"><i class="icon-dashboard"></i>
                            <span>管理员首页</span></a>
                        <a class="accordion-toggle b_F79999" href="index7.html"><i class="icon-dashboard"></i>
                            <span>查看申请名单</span></a>
                        <a class="accordion-toggle b_F79999" href="index9.html"><i class="icon-dashboard"></i>
                            <span>查看志愿者名单</span></a>
                    </div>
                </div>
            </div>
            <!--结束-->
        </div>

        <div class="main_container" id="tables_page">
            <div class="row-fluid">
                <ul class="breadcrumb">
                    <li><a href="index_admin.html">首页</a> <span class="divider">/</span></li>
                    <li><a href="#">志愿者管理</a> <span class="divider">/</span></li>
                    <li class="active">查看申请名单</li>
                </ul>
                <h5 class="heading">
                    &nbsp;
                    <div class="btn-group pull-right">
                        <button class="btn" id="addbtn"><i class="icon-plus"></i> </button>
                        <button class="btn" id="rebtn"><i class="icon-reply"></i> 返回</button>
                    </div>
                </h5>
            </div>
            <!--成绩 列表-->
            <div class="row-fluid" id="list_exam" >
                <div class="widget widget-padding span12">
                    <div class="widget-header">
                        <i class="icon-table"></i>
                        <h5>志愿者申请列表</h5>

                        <div class="widget-buttons">
                            <a href="#" data-title="Collapse" data-collapsed="false" class="tip collapse"><i
                                    class="icon-chevron-up"></i>  </a>
                        </div>
                    </div>
                    <div class="widget-body">
                        <table id="exam_datatable" class="table table-striped table-bordered dataTable">
                            <thead>
                            <tr>
                                <th>用户ID</th>
                                <th>姓名</th>
                                <th>性别</th>
                                <th>年龄</th>
                                <th>身体状况</th>
                                <th>联系电话</th>
                                <th>家庭住址</th>

                            </tr>
                            </thead>
                            <tbody id="outlook">

                            </tbody>
                            <tfoot>

                            </tfoot>


                        </table>
                        <br/>
                        <div align="right">
                            <tr>
                                <td><input style="width: 120px; height: 28px;" placeholder="请输入申请者ID" type="text" name="input1"/></td>
                                <td><input style="height: 28px;" type="button" onclick="onclick12()" value="批准"/></td>
                                <td><input style="height: 28px;" type="button" onclick="onclick13()" value="拒绝"/></td>
                            </tr>

                        </div>

                    </div>
                    <!-- /widget-body -->
                </div>
                <!-- /widget -->
            </div>

        </div>
        <!-- /Main window -->

    </div>
    <!--/.fluid-container-->
</div>

</body>



</html>
